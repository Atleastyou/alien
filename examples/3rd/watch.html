<!DOCTYPE html>
<!--
 - 文件描述
 - @author ydr.me
 - @create 2015-04-14 11:29
 -->
<html>
<head lang="zh-cn">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1.0,minimum-scale=1.0,minimal-ui">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="author" content="云淡然;http://ydr.me">
    <meta name="keywords" content="关键词1,关键词2">
    <meta name="description" content="描述语句">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <title>watch.html</title>
</head>
<body ontouchstart="">

<script src="/src/3rd/watch.js"></script>
<script>
    //defining our object no matter which way we want
    var ex = {
        l1a: "bla bla",
        l1b: {
            l2a: "lo lo",
            l2b: "hey hey"
        }
    };

    watch(ex, function (prop, action, difference, oldvalue) {

        alert("prop: " + prop + "\n action: " + action + "\n difference: " + JSON.stringify(difference) + "\n old: " + JSON.stringify(oldvalue) + "\n ... and the context: " + JSON.stringify(this));

    }, 0, true);


    ex.l1b.l2c = "new attr"; //it is not instantaneous, you may wait 50 miliseconds

    setTimeout(function () {
        ex.l1b.l2c = "other value";
    }, 100);
</script>

</body>
</html>