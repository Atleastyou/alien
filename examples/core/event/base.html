<!DOCTYPE html>
<!--
 - event.html
 - @author ydr.me
 - 2014-09-21 15:48
 -->
<html>
<head lang="zh-cn">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1.0,minimum-scale=1.0,minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="author" content="云淡然;http://ydr.me">
    <meta name="keywords" content="关键词1,关键词2">
    <meta name="description" content="描述语句">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <title>event.html</title>
    <style>
        div{
            border: 4px solid #ddd;
            padding: 20px;
        }

        button{
            padding: 5px 10px;
        }
    </style>
</head>
<body>
<p style="color: #ad0000;">请打开控制台查看</p>
<h1>事件代理</h1>
<div id="div1">
    <button>按钮1</button>
    <button class="btn2">按钮2，不会传递到顶层</button>
    <button>按钮3</button>
    <button>按钮4</button>
</div>

<h1>普通事件</h1>
<div id="div2">
    <button id="btn1">按钮1</button>
    <button id="btn2">按钮2，不会传递到顶层</button>
    <button id="btn3">按钮3，只会执行一次</button>
</div>


<script src="/seajs/sea.js" id="script"></script>
<script>
    define('app', function (require) {
        var event = require('/src/core/event/base.js');
        var div1 = document.getElementById('div1');
        var btn1 = document.getElementById('btn1');
        var btn2 = document.getElementById('btn2');
        var btn3 = document.getElementById('btn3');
        var fn3 = function(eve){
            console.log('btn3 click');
            console.log(this);
            console.log(eve);

            event.un(btn3, 'click', fn3);
        };

        event.on(div1, 'click', 'button', function (eve) {
            console.log(this);
            console.log(eve);

            if(this.className === 'btn2'){
                return !1;
            }
        });

        event.on(btn1, 'click', function(eve){
            console.log(this);
            console.log(eve);
        });

        event.on(btn2, 'click', function(eve){
            console.log(this);
            console.log(eve);

            return !1;
        });

        event.on(btn3, 'click', fn3);

        event.on(document, 'click', function (eve) {
            console.log('document click');
            console.log(this);
            console.log(eve.target);
        });
    });
    seajs.use('app');
</script>
</body>
</html>