<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Source: utils/dato.js - Alien documents</title>

    <link type="text/css" rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bootstrap-theme.min.css">
    <link type="text/css" rel="stylesheet" href="/static/styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="/static/css/docs.css">
</head>

<body>


<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="container">
	    <div class="navbar-header">
	        <a class="navbar-brand" href="index.html">Alien documents</a>
	    </div>
	    <nav role="navigation">
			<ul class="nav navbar-nav">
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="libs_Router.module_js.html">js</a></li>
<li><a href="module-core_communication_jsonp.html">core/communication/jsonp</a></li>
<li><a href="module-core_communication_upload.html">core/communication/upload</a></li>
<li><a href="module-core_communication_xhr.html">core/communication/xhr</a></li>
<li><a href="module-core_dom_animation.html">core/dom/animation</a></li>
<li><a href="module-core_dom_attribute.html">core/dom/attribute</a></li>
<li><a href="module-core_dom_canvas.html">core/dom/canvas</a></li>
<li><a href="module-core_dom_modification.html">core/dom/modification</a></li>
<li><a href="module-core_dom_see.html">core/dom/see</a></li>
<li><a href="module-core_dom_selector.html">core/dom/selector</a></li>
<li><a href="module-core_event_base.html">core/event/base</a></li>
<li><a href="module-core_event_drag.html">core/event/drag</a></li>
<li><a href="module-core_event_ready.html">core/event/ready</a></li>
<li><a href="module-core_event_touch.html">core/event/touch</a></li>
<li><a href="module-core_event_wheel.html">core/event/wheel</a></li>
<li><a href="module-core_navigator_compatible.html">core/navigator/compatible</a></li>
<li><a href="module-core_navigator_cookie.html">core/navigator/cookie</a></li>
<li><a href="module-core_navigator_hashbang.html">core/navigator/hashbang</a></li>
<li><a href="module-core_navigator_querystring.html">core/navigator/querystring</a></li>
<li><a href="module-core_navigator_shell.html">core/navigator/shell</a></li>
<li><a href="module-core_navigator_storage.html">core/navigator/storage</a></li>
<li><a href="module-core_navigator_ua.html">core/navigator/ua</a></li>
<li><a href="module-libs_Animation.html">libs/Animation</a></li>
<li><a href="module-libs_DDB.html">libs/DDB</a></li>
<li><a href="module-libs_Emitter.html">libs/Emitter</a></li>
<li><a href="module-libs_Pagination.html">libs/Pagination</a></li>
<li><a href="module-libs_Pjax.html">libs/Pjax</a></li>
<li><a href="module-libs_Queue.html">libs/Queue</a></li>
<li><a href="module-libs_Template.html">libs/Template</a></li>
<li><a href="module-libs_Validator.html">libs/Validator</a></li>
<li><a href="module-libs_Weixin.html">libs/Weixin</a></li>
<li><a href="module-parent_hotkey.html">parent/hotkey</a></li>
<li><a href="module-parent_index.html">parent/index</a></li>
<li><a href="module-parent_keyframes.html">parent/keyframes</a></li>
<li><a href="module-ui_.html">ui/</a></li>
<li><a href="module-ui_Autoheight_.html">ui/Autoheight/</a></li>
<li><a href="module-ui_Banner_.html">ui/Banner/</a></li>
<li><a href="module-ui_Dialog_.html">ui/Dialog/</a></li>
<li><a href="module-ui_Editor_.html">ui/Editor/</a></li>
<li><a href="module-ui_Imgclip_.html">ui/Imgclip/</a></li>
<li><a href="module-ui_Mask_.html">ui/Mask/</a></li>
<li><a href="module-ui_Pager_.html">ui/Pager/</a></li>
<li><a href="module-ui_Pagination_.html">ui/Pagination/</a></li>
<li><a href="module-ui_Prettify_.html">ui/Prettify/</a></li>
<li><a href="module-ui_Resize_.html">ui/Resize/</a></li>
<li><a href="module-ui_Scrollbar_.html">ui/Scrollbar/</a></li>
<li><a href="module-ui_Scrollspy_.html">ui/Scrollspy/</a></li>
<li><a href="module-ui_Stickly_.html">ui/Stickly/</a></li>
<li><a href="module-ui_Tab_.html">ui/Tab/</a></li>
<li><a href="module-ui_Tooltip_.html">ui/Tooltip/</a></li>
<li><a href="module-ui_Validator_.html">ui/Validator/</a></li>
<li><a href="module-ui_Viewer_.html">ui/Viewer/</a></li>
<li><a href="module-ui_Window_.html">ui/Window/</a></li>
<li><a href="module-utils_allocation.html">utils/allocation</a></li>
<li><a href="module-utils_calendar.html">utils/calendar</a></li>
<li><a href="module-utils_canvas.html">utils/canvas</a></li>
<li><a href="module-utils_class.html">utils/class</a></li>
<li><a href="module-utils_controller.html">utils/controller</a></li>
<li><a href="module-utils_date.html">utils/date</a></li>
<li><a href="module-utils_dato.html">utils/dato</a></li>
<li><a href="module-utils_easing.html">utils/easing</a></li>
<li><a href="module-utils_hashbang.html">utils/hashbang</a></li>
<li><a href="module-utils_querystring.html">utils/querystring</a></li>
<li><a href="module-utils_random.html">utils/random</a></li>
<li><a href="module-utils_selection.html">utils/selection</a></li>
<li><a href="module-utils_typeis.html">utils/typeis</a></li>
<li><a href="module-utils_url.html">utils/url</a></li>
<li><a href="module-widgets_confirm.html">widgets/confirm</a></li>
<li><a href="module-widgets_prompt.html">widgets/prompt</a></li>
<li><a href="parent_marked-render-table.module_js.html">js</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="module-ui_Imgclip_.html#~event:cancel">module:ui/Imgclip/.cancel</a></li>
<li><a href="module-ui_Pagination_.html#~event:change">module:ui/Tab/.change</a></li>
<li><a href="module-libs_Queue.html#~event:clear">module:libs/Queue.clear</a></li>
<li><a href="module-ui_Imgclip_.html#~event:clip">module:ui/Imgclip/.clip</a></li>
<li><a href="module-ui_Imgclip_.html#~event:clipend">module:ui/Imgclip/.clipend</a></li>
<li><a href="module-ui_Imgclip_.html#~event:clipstart">module:ui/Imgclip/.clipstart</a></li>
<li><a href="module-ui_Window_.html#~event:close">module:ui/Tooltip/.close</a></li>
<li><a href="module-ui_Prettify_.html#~event:done">module:libs/Queue.done</a></li>
<li><a href="module-core_event_drag.html#~event:drag">module:core/event/drag.drag</a></li>
<li><a href="module-libs_Animation.html#~event:end">module:libs/Animation.end</a></li>
<li><a href="module-ui_Scrollspy_.html#~event:enterviewport">module:ui/Scrollspy/.enterviewport</a></li>
<li><a href="module-ui_Viewer_.html#~event:error">module:ui/Imgclip/.error</a></li>
<li><a href="module-ui_Dialog_.html#~event:esc">module:ui/Mask/.esc</a></li>
<li><a href="module-ui_.html#~event:getoptions">module:ui/.getoptions</a></li>
<li><a href="module-ui_Mask_.html#~event:hit">module:ui/Mask/.hit</a></li>
<li><a href="module-ui_Dialog_.html#~event:hitbg">module:ui/Dialog/.hitbg</a></li>
<li><a href="module-ui_Scrollspy_.html#~event:leaveviewport">module:ui/Scrollspy/.leaveviewport</a></li>
<li><a href="module-ui_Window_.html#~event:open">module:ui/Mask/.open</a></li>
<li><a href="module-libs_Queue.html#~event:pause">module:libs/Queue.pause</a></li>
<li><a href="module-libs_Queue.html#~event:push">module:libs/Queue.push</a></li>
<li><a href="module-ui_Resize_.html#~event:resize">module:ui/Resize/.resize</a></li>
<li><a href="module-ui_Resize_.html#~event:resizeend">module:ui/Resize/.resizeend</a></li>
<li><a href="module-ui_Resize_.html#~event:resizestart">module:ui/Resize/.resizestart</a></li>
<li><a href="module-ui_Scrollbar_.html#~event:scrollx">module:ui/Scrollbar/.scrollx</a></li>
<li><a href="module-ui_Scrollbar_.html#~event:scrolly">module:ui/Scrollbar/.scrolly</a></li>
<li><a href="module-ui_.html#~event:setoptions">module:ui/.setoptions</a></li>
<li><a href="module-libs_Queue.html#~event:shift">module:libs/Queue.shift</a></li>
<li><a href="module-libs_Queue.html#~event:size">module:libs/Queue.size</a></li>
<li><a href="module-libs_Animation.html#~event:start">module:libs/Animation.start</a></li>
<li><a href="module-libs_Queue.html#~event:step">module:libs/Queue.step</a></li>
<li><a href="module-libs_Queue.html#~event:stop">module:libs/Queue.stop</a></li>
<li><a href="module-libs_Validator.html#~event:validateallend">module:libs/Validator.validateallend</a></li>
<li><a href="module-libs_Validator.html#~event:validateallstart">module:libs/Validator.validateallstart</a></li>
<li><a href="module-libs_Validator.html#~event:validateend">module:libs/Validator.validateend</a></li>
<li><a href="module-libs_Validator.html#~event:validateoneend">module:libs/Validator.validateoneend</a></li>
<li><a href="module-libs_Validator.html#~event:validateonestart">module:libs/Validator.validateonestart</a></li>
</ul>
</li>
</ul>

			<ul class="nav navbar-nav navbar-right">
                <li><a href="/">Alien home</a></li>
            </ul>
	    </nav>
  </div>
</div>


<div id="main">


	

	    <div class="main">
	        <nav id="docs-sidebar">
	            

	            <ul class="nav sidebar-list">
	                

	                

	                
	                    <li class="sidebar-header">Events &times; 69</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:cancel">cancel</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:change">change</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:change">change</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:change">change</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:change">change</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:change">change</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:change">change</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:change">change</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:change">change</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clear">clear</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clip">clip</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clip">clip</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clip">clip</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clipend">clipend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clipend">clipend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clipend">clipend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clipstart">clipstart</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clipstart">clipstart</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:clipstart">clipstart</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:close">close</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:close">close</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:close">close</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:close">close</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:close">close</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:done">done</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:done">done</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:done">done</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:done">done</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:done">done</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:drag">drag</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:end">end</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:enterviewport">enterviewport</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:error">error</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:error">error</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:esc">esc</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:esc">esc</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:getoptions">getoptions</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:hit">hit</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:hitbg">hitbg</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:leaveviewport">leaveviewport</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:open">open</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:open">open</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:open">open</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:open">open</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:pause">pause</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:push">push</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:resize">resize</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:resize">resize</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:resizeend">resizeend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:resizestart">resizestart</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:scrollx">scrollx</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:scrollx">scrollx</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:scrolly">scrolly</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:scrolly">scrolly</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:setoptions">setoptions</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:shift">shift</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:size">size</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:start">start</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:step">step</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:stop">stop</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateallend">validateallend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateallstart">validateallstart</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateend">validateend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateend">validateend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateoneend">validateoneend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateoneend">validateoneend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateoneend">validateoneend</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateonestart">validateonestart</a>
    
</li>

	                    
	                        

<li class="">
    
        <a class="" href="#~event:validateonestart">validateonestart</a>
    
</li>

	                    
	                

	                
	            </ul>
	        </nav>

	        <section id="docs-content">
	            <div class="content">
		            <h1 class="page-title">Source: utils/dato.js</h1>

		            


    

<pre class="prettyprint source"><code>/*!
 * data-traveller.js
 * @author ydr.me
 * 2014-09-14 17:26
 */


define(function (require, exports, module) {
    /**
     * @module utils/dato
     * @requires utils/typeis
     */

    'use strict';

    var typeis = require('./typeis.js');
    var udf;
    var canListTypeArr = 'array object nodelist htmlcollection arguments namednodemap'.split(' ');
    var REG_NOT_UTF16_SINGLE = /[^\x00-\xff]{2}/g;
    var REG_STRING_FIX = /[.*+?^=!:${}()|[\]\/\\]/g;
    var REG_BEGIN_0 = /^0+/;


    /**
     * 格式化数字，如果是非数字则返回默认值
     * @param {*} obj 待格式化对象
     * @param {*} [dft] 非数字时的默认值
     * @returns {*}
     */
    exports.parseInt = function (obj, dft) {
        obj = parseInt(obj, 10);

        return isNaN(obj) ? dft : obj;
    };


    /**
     * 格式化数字，如果是非数字则返回默认值
     * @param {*} obj 待格式化对象
     * @param {*} [dft] 非数字时的默认值
     * @returns {*}
     */
    exports.parseFloat = function (obj, dft) {
        obj = parseFloat(obj);

        return isNaN(obj) ? dft : obj;
    };


    /**
     * 遍历元素
     * @param {Array/Object} list  数组、可枚举对象
     * @param {Function} callback  回调，返回false时停止遍历
     * @param {*} [context] 上下文
     *
     * @example
     * // 与 jQuery.each 一样
     * // 返回 false 时将退出当前遍历
     * data.each(list, function(key, val){});
     */
    exports.each = function (list, callback, context) {
        var i;
        var j;

        // 数组 或 类似数组
        if (list &amp;&amp; list.length !== udf) {
            for (i = 0, j = exports.parseInt(list.length, 0); i &lt; j; i++) {
                context = context || window;
                if (callback.call(context, i, list[i]) === false) {
                    break;
                }
            }
        }
        // 纯对象
        else if (list !== null &amp;&amp; list !== udf) {
            for (i in list) {
                if (list.hasOwnProperty(i)) {
                    context = context || window;
                    if (callback.call(context, i, list[i]) === false) {
                        break;
                    }
                }
            }
        }
    };


    /**
     * 扩展静态对象
     * @param {Boolean|Object} [isExtendDeep] 是否深度扩展，可省略，默认false
     * @param {Object}  [source] 源对象
     * @param {...Object}  [target] 目标对象，可以是多个
     * @returns {*}
     *
     * @example
     * // 使用方法与 jQuery.extend 一样
     * var o1 = {a: 1};
     * var o2 = {b: 2};
     * var o3 = data.extend(true, o1, o2);
     * // => {a: 1, b: 2}
     * o1 === o3
     * // => true
     *
     * // 如果不想污染原始对象，可以传递一个空对象作为容器
     * var o1 = {a: 1};
     * var o2 = {b: 2};
     * var o3 = data.extend(true, {}, o1, o2);
     * // => {a: 1, b: 2}
     * o1 === o3
     * // => fale
     */
    exports.extend = function (isExtendDeep, source, target) {
        var args = arguments;
        var firstArgIsBoolean = typeof(args[0]) === 'boolean';
        var current = firstArgIsBoolean ? 1 : 0;
        var length = args.length;
        var i;
        var obj;
        var sourceType;
        var objType;

        isExtendDeep = firstArgIsBoolean &amp;&amp; args[0] === true;
        source = args[current++];

        for (; current &lt; length; current++) {
            obj = args[current];
            for (i in obj) {
                if (obj.hasOwnProperty(i) &amp;&amp; obj[i] !== undefined) {
                    sourceType = typeis(source[i]);
                    objType = typeis(obj[i]);

                    if (objType === 'object' &amp;&amp; isExtendDeep) {
                        source[i] = sourceType !== objType ? {} : source[i];
                        exports.extend.call(this, isExtendDeep, source[i], obj[i]);
                    } else if (objType === 'array' &amp;&amp; isExtendDeep) {
                        source[i] = sourceType !== objType ? [] : source[i];
                        exports.extend.call(this, isExtendDeep, source[i], obj[i]);
                    } else {
                        source[i] = obj[i];
                    }
                }
            }
        }

        return source;
    };


    /**
     * 萃取
     * @param data {Object} 传递的数据
     * @param keys {Array} 摘取的键数组
     * @param [filter] {Function} 过滤方法，默认取不为 undefined 键值
     * @returns {Object}
     */
    exports.pick = function (data, keys, filter) {
        var data2 = {};

        data = data || {};

        filter = filter || function (val) {
            return val !== udf;
        };

        keys.forEach(function (key) {
            if (filter(data[key])) {
                data2[key] = data[key];
            }
        });

        return data2;
    };


    /**
     * 转换对象为一个纯数组，只要对象有length属性即可
     * @param {Object} [obj] 对象
     * @param {Boolean} [isConvertWhole] 是否转换整个对象为数组中的第0个元素，当该对象无length属性时，默认false
     * @returns {Array}
     *
     * @example
     * var o = {0:"foo", 1:"bar", length: 2}
     * data.toArray(o);
     * // => ["foo", "bar"]
     *
     * var a1 = [1, 2, 3];
     * // 转换后的数组是之前的副本
     * var a2 = data.toArray(a1);
     * // => [1, 2, 3]
     * a2 === a1;
     * // => false
     */
    exports.toArray = function (obj, isConvertWhole) {
        var ret = [];
        var i = 0;
        var j;
        var objType = typeis(obj);

        if (canListTypeArr.indexOf(objType) > -1 &amp;&amp; typeis(obj.length) === 'number' &amp;&amp; obj.length >= 0) {
            for (j = obj.length; i &lt; j; i++) {
                ret.push(obj[i]);
            }
        } else if (obj &amp;&amp; isConvertWhole) {
            ret.push(obj);
        }

        return ret;
    };


    /**
     * 计算字节长度
     * @param string {String} 原始字符串
     * @param [doubleLength=2] {Number} 双字节长度，默认为2
     * @returns {number}
     *
     * @example
     * data.bytes('我123');
     * // => 5
     */
    exports.bytes = function (string, doubleLength) {
        string += '';
        doubleLength = exports.parseInt(doubleLength, 2);

        var i = 0,
            j = string.length,
            k = 0,
            c;

        for (; i &lt; j; i++) {
            c = string.charCodeAt(i);
            k += (c >= 0x0001 &amp;&amp; c &lt;= 0x007e) || (0xff60 &lt;= c &amp;&amp; c &lt;= 0xff9f) ? 1 : doubleLength;
        }

        return k;
    };


    /**
     * 计算字符串长度
     * 双字节的字符使用 length 属性计算不准确
     * @ref http://es6.ruanyifeng.com/#docs/string
     * @param string {String} 原始字符串
     *
     * @example
     * var s = "𠮷";
     * s.length = 2;
     * dato.length(s);
     * // => 1
     */
    exports.length = function (string) {
        string += '';

        return string.replace(REG_NOT_UTF16_SINGLE, '*').length;
    };


    /**
     * 对象1级比较，找出相同和不同的键
     * @param obj1 {Object|Array}
     * @param obj2 {Object|Array}
     * @returns {Object}
     *
     * @example
     * data.compare({a:1,b:2,c:3}, {a:1,d:4});
     * // =>
     * // {
     * //    same: ["a"],
     * //    only: [
     * //       ["b", "c"],
     * //       ["d"]
     * //    ],
     * //    different: ["b", "c", "d"]
     * // }
     */
    exports.compare = function (obj1, obj2) {
        var obj1Type = typeis(obj1);
        var obj2Type = typeis(obj2);
        var obj1Only = [];
        var obj2Only = [];
        var same = [];

        // 类型不同
        if (obj1Type !== obj2Type) {
            return null;
        }

        // 对象
        if (obj1Type === 'object' || obj1Type === 'array') {
            exports.each(obj1, function (key, val) {
                if (obj2[key] !== val) {
                    obj1Only.push(key);
                } else {
                    same.push(key);
                }
            });

            exports.each(obj2, function (key, val) {
                if (obj1[key] !== val) {
                    obj2Only.push(key);
                }
            });

            return {
                same: same,
                only: [
                    obj1Only,
                    obj2Only
                ],
                different: obj1Only.concat(obj2Only)
            };
        } else {
            return null;
        }
    };


    /**
     * 人类数字，千位分割
     * @param number {String|Number} 数字（字符串）
     * @param [separator=","] {String} 分隔符
     * @param [length=3] {Number} 分隔长度
     * @returns {string} 分割后的字符串
     */
    exports.humanize = function (number, separator, length) {
        separator = separator || ',';
        length = length || 3;

        var reg = new RegExp('(\\d)(?=(\\d{' + length + '})+$)', 'g');
        var arr = String(number).split('.');
        var p1 = arr[0].replace(reg, '$1' + separator);

        return p1 + (arr[1] ? '.' + arr[1] : '');
    };


    /**
     * 比较两个长整型数值
     * @param long1 {String} 长整型数值字符串1
     * @param long2 {String} 长整型数值字符串2
     * @param [operator=">"] {String} 比较操作符，默认比较 long1 > long2
     * @returns {*}
     */
    exports.than = function (long1, long2, operator) {
        operator = operator || '>';
        long1 = String(long1).replace(REG_BEGIN_0, '');
        long2 = String(long2).replace(REG_BEGIN_0, '');

        // 1. 比较长度
        if (long1.length > long2.length) {
            return operator === '>';
        } else if (long1.length &lt; long2.length) {
            return operator === '&lt;';
        }

        var long1List = exports.humanize(long1, ',', 15).split(',');
        var long2List = exports.humanize(long2, ',', 15).split(',');

        //[
        // '123456',
        // '789012345678901',
        // '234567890123456',
        // '789012345678901',
        // '234567890123457'
        // ]

        // 2. 比较数组长度
        if (long1List.length > long2List.length) {
            return operator === '>';
        } else if (long1List.length &lt; long2List.length) {
            return operator === '&lt;';
        }

        // 3. 遍历比较
        var ret = false;

        exports.each(long1List, function (index, number1) {
            var number2 = long2List[index];

            if (number1 > number2) {
                ret = operator === '>';
                return false;
            } else if (number1 &lt; number2) {
                ret = operator === '&lt;';
                return false;
            }
        });

        return ret;
    };


    /**
     * 按长度填满指定字符
     * @param {Number|String} orginalString 原始字符串
     * @param {Number} length 长度
     * @param {String} [fixString="0"] 补充的字符
     * @param {Boolean} [isSuffix=false] 是否添加为后缀，默认前缀
     * @returns {String}
     *
     * @example
     * dato.fillString('2', 4);
     * // => "0002"
     */
    exports.fillString = function (orginalString, length, fixString, isSuffix) {
        var len = length;
        var fixedString = '';
        var args = arguments;
        var argL = args.length;

        // dato.fillString(originalString, length, isSuffix);
        // dato.fillString(originalString, length, fixString, isSuffix);
        if (typeis.boolean(args[argL - 1])) {
            fixString = argL === 4 ? args[2] : '0';
            isSuffix = args[argL - 1];
        }
        // dato.fillString(originalString, length);
        // dato.fillString(originalString, length, fixString);
        else {
            fixString = argL === 3 ? args[2] : '0';
            isSuffix = false;
        }

        while (len--) {
            fixedString += fixString;
        }

        return isSuffix ?
            (orginalString + fixedString).slice(0, length) :
            (fixedString + orginalString).slice(-length);
    };


    /**
     * 修正正则字符串
     * @param regExpString
     * @returns {String}
     *
     * @example
     * data.fixRegExp('/');
     * // => '\/'
     */
    exports.fixRegExp = function (regExpString) {
        return regExpString.replace(REG_STRING_FIX, '\\$&amp;');
    };


    /////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////[ ONLY BROWSER ]///////////////////////////////////
    /////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////////////////////////////////////////////////////


    /**
     * ascii to base64
     * @param ascii {String} ascii 字符串
     * @returns {String} base64 字符串
     */
    exports.atob = function (ascii) {
        try {
            return window.atob(encodeURIComponent(String(ascii)));
        } catch (err) {
            return '';
        }
    };


    /**
     * base64 to ascii
     * @param base64 {String} base64 字符串
     * @returns {String} ascii 字符串
     */
    exports.btoa = function (base64) {
        try {
            return decodeURIComponent(window.btoa(String(base64)));
        } catch (err) {
            return '';
        }
    };
});</code></pre>






	            </div>
	        </section>
	    </div>

    


</div>

<script src="/static/js/jquery.1.10.min.js"> </script>
<script src="/static/js/prettify/prettify.js"> </script>
<script src="/static/js/prettify/lang-css.js"> </script>
<script> prettyPrint(); </script>
<script src="/static/js/linenumber.js"> </script>
<script src="/static/js/bootstrap.js"> </script>
<script src="/static/js/script.js"> </script>

</body>
</html>
